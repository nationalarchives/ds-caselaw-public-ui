{% from "components/hero.jinja" import hero %}
{% from "components/button.jinja" import button %}
{% macro search_input(id="search_input", placeholder="", value="", label=None, button_action="", button_label="Search") %}
  <div class="search-input__container">
    {% if label %}<label for="{{ id }}" class="search-input__label">{{ label }}</label>{% endif %}
    <input value="{{ value }}"
           name="query"
           type="text"
           placeholder="{{ placeholder }}"
           id="{{ id }}" />
    <input type="submit"
           value="{{ button_label }}"
           class="button-primary"
           formaction="{{ button_action }}" />
  </div>
{% endmacro %}
{% macro search_form(label="", id="") %}
  <form role="search" aria-label="{{ label }}" id="{{ id }}">
    {{ caller() }}
  </form>
{% endmacro %}
{% macro search_form_container() %}
  <div class="search-input">{{ caller() }}</div>
{% endmacro %}
{% macro search_input_footer() %}
  <div class="search-input__footer">{{ caller() }}</div>
{% endmacro %}
{% macro search_input_actions(class="") %}
  <div class="search-input__actions {{ class }}">{{ caller() }}</div>
{% endmacro %}
{% macro search_input_examples() %}
  {% call search_form(label="Search by keyword or neutral citation", id="analytics-search-form") %}
    <div class="container">
      <h3>Current homepage usage</h3>
    </div>
    {% call hero() %}
      {% call search_form_container() %}
        <p>Use any search term including neutral citation, names and keywords</p>
        {{ search_input(label="Search by keyword or neutral citation", button_action=url("advanced_search") , button_label="Search") }}
        {% call search_input_footer() %}
          {{ button(variant="link", element_type="input", attrs={"type": "submit", "formaction": url("advanced_search") , "value": "Advanced search"}) }}
        {% endcall %}
      {% endcall %}
    {% endcall %}
    <div class="container">
      <h3>With no params</h3>
    </div>
    {% call hero() %}
      {% call search_form_container() %}
        <p>With no params</p>
        {{ search_input() }}
      {% endcall %}
    {% endcall %}
    <div class="container">
      <h3>With a bigger heading</h3>
    </div>
    {% call hero() %}
      {% call search_form_container() %}
        <h3>With a bigger heading</h3>
        {{ search_input() }}
      {% endcall %}
    {% endcall %}
  {% endcall %}
{% endmacro %}
