{% load court_utils feature_flags %}
{% flag_enabled 'TEXT_DATE_INPUT' as text_date_input %}
<div class="structured-search__single-field-panel">
  <div class="structured-search__limit-to-container">
    <fieldset>
    {% if form %}
      <label for="{{form.court.auto_id}}" class="structured-search__limit-to-label">
        {{form.court.label}}
      </label>
      <div class="structured-search__court-options" id="court">
        {% for court in form.court %}
          <div class="structured-search__court-option">
            <label for="{{court.id_for_label}}">
              {{court.tag}}
              <span class="structured-search__court-option-label">{{ court.choice_label }}</span>
            </label>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <label for="court" class="structured-search__limit-to-label">From specific courts or tribunals</label>
      <div class="structured-search__court-options" id="court">{% include "includes/courts_options.html" %}</div>
      {% endif %}
    </fieldset>
  </div>
</div>
<div class="structured-search__multi-fields-panel">
  <div class="structured-search__limit-to-container">
  {% if form %}
  <fieldset>
      <legend>
        <span class="structured-search__limit-to-label" name="from_date">{{form.from_date.label}}</span>
      </legend>
      <p class="structured-search__help-text" id="party_name-help-text">For example 01 01 2003</p>
  {{form.from_date }}
  {% else %}
    <fieldset>
      <legend>
        <span class="structured-search__limit-to-label" name="from_date">From date</span>
      </legend>
      <p class="structured-search__help-text" id="party_name-help-text">For example 01 01 2003</p>
      <p class="structured-search__from-date-error-message"
         id="from-date-error">
        <span class="structured-search__from-date-visually-hidden">Error:</span> Enter a date in the correct format
      </p>
      {% if text_date_input %}
        <input type="hidden" name="text_date_input" value="True" />
        <div class="structured-search__date-input-group js-date-input">
          <div>
            <label for="from_day" class="structured-search__help-text">Day</label>
            <input class="structured-search__date-input date-input--error"
                   id="from_day"
                   name="from_day"
                   type="number"
                   formnovalidate="formnovalidate"
                   min="1"
                   max="31"
                   step="1"
                   value="{{ context.from_day }}" />
          </div>
          <div>
            <label for="from_month" class="structured-search__help-text">Month</label>
            <input class="structured-search__date-input date-input--error"
                   id="from_month"
                   name="from_month"
                   type="number"
                   min="1"
                   max="12"
                   step="1"
                   value="{{ context.from_month }}" />
          </div>
          <div>
            <label for="from_year" class="structured-search__help-text">Year</label>
            <input class="structured-search__date-input date-input--error"
                   id="from_year"
                   name="from_year"
                   min="1995"
                   max="2020"
                   type="number"
                   step="1"
                   value="{{ context.from_year }}" />
          </div>
        </div>
      {% else %}
        <input class="structured-search__date-input "
               id="from_date"
               min="2003-01-02"
               name="from"
               placeholder="DD-MM-YYYY"
               type="date"
               value="{{ context.from }}" />
      {% endif %}
    </fieldset>
    {% endif %}
  </div>
  <div class="structured-search__limit-to-container">
    <fieldset>
      <label for="to_date" class="structured-search__limit-to-label">To date</label>
      <p class="structured-search__help-text" id="party_name-help-text">For example 30 04 2023</p>
      <p class="structured-search__to-date-error-message" id="to-date-error">
        <span class="structured-search__to-date-visually-hidden">Error:</span> Enter a date in the correct format
      </p>
      {% if text_date_input %}
        <div class="structured-search__date-input-group js-date-input">
          <div>
            <label for="to_day" class="structured-search__help-text">Day</label>
            <input class="structured-search__date-input date-input--error"
                   id="to_day"
                   name="to_day"
                   type="number"
                   step="1"
                   value="{{ context.to_day }}" />
          </div>
          <div>
            <label for="to_month" class="structured-search__help-text">Month</label>
            <input class="structured-search__date-input date-input--error"
                   id="to_month"
                   name="to_month"
                   type="number"
                   step="1"
                   value="{{ context.to_month }}" />
          </div>
          <div>
            <label for="to_year" class="structured-search__help-text">Year</label>
            <input class="structured-search__date-input date-input--error"
                   id="to_year"
                   name="to_year"
                   type="number"
                   step="1"
                   value="{{ context.to_year }}" />
          </div>
        </div>
      {% else %}
        <input class="structured-search__date-input"
               id="to_date"
               min="2003-01-02"
               name="to"
               placeholder="DD-MM-YYYY"
               type="date"
               value="{{ context.to }}" />
      {% endif %}
    </fieldset>
  </div>
</div>
<div class="structured-search__multi-fields-panel">
  <div class="structured-search__specific-field-container">
    <fieldset>
      {% if form %}
        <label for="{{ form.party.auto_id }}"
               class="structured-search__limit-to-label">{{ form.party.label }}</label>
        <p class="structured-search__help-text" id="party_name-help-text">For example a claimant, defendant or other party</p>
        {{ form.party }}
      {% else %}
        <!-- TODO Tim factor this out using the form everywhere -->
        <label for="party_name" class="structured-search__limit-to-label">Party name</label>
        <p class="structured-search__help-text" id="party_name-help-text">For example a claimant, defendant or other party</p>
        <input class="structured-search__limit-to-input"
               id="party_name"
               name="party"
               type="text"
               value="{{ context.party }}"
               aria-describedby="party_name-help-text" />
      {% endif %}
    </fieldset>
  </div>
  <div class="structured-search__specific-field-container">
    <fieldset>
      {% if form %}
        <label for="{{ form.judge.auto_id }}"
               class="structured-search__limit-to-label">{{ form.judge.label }}</label>
        <p class="structured-search__help-text" id="judge_name-help-text">
          For example 'Smith', 'Judge Smith' or 'Lord Justice Smith'
        </p>
        {{ form.judge }}
      {% else %}
        <!-- TODO Tim use the form on the results filters and get rid of this -->
        <label for="judge_name" class="structured-search__limit-to-label">Judge name</label>
        <p class="structured-search__help-text" id="judge_name-help-text">
          For example 'Smith', 'Judge Smith' or 'Lord Justice Smith'
        </p>
        <input class="structured-search__limit-to-input"
               id="judge_name"
               name="judge"
               type="text"
               value="{{ context.judge }}"
               aria-describedby="judge_name-help-text" />
      {% endif %}
    </fieldset>
  </div>
</div>
<div class="structured-search__submit-container">
  <input type="submit"
         class="structured-search__update-filters-button"
         formnovalidate="formnovalidate"
         value="Update filters" />
</div>
